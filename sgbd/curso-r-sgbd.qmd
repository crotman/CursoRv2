---
title: "An√°lise de Dados em R - SGBDs"
format: 
    revealjs:
        footer: "Bruno Crotman - 2023"
        transition: slide
        incremental: true
        logo: DataQuant.svg
        scrollable: true   
        code-fold: true   
        code-summary: "R"

editor: visual
---

```{r include=FALSE}

knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)

library(tidyverse)
library(DBI)
library(reactable)

```

# Conte√∫do

## Conte√∫do

-   O que √© um SGBD - Sistema Gerenciador de Banco de Dados

-   Modelagem de Banco de Dados

-   DBI - conex√£o, escrita, leitura

-   dbplyr - usando os verbos da dplyr pra consulta

-   Manipula√ß√£o individual de linhas

# SGBD - Sistema Gerenciador de Banco de Dados

## Caracter√≠sticas de um SGBD

-   SGBD (DBMS em ingl√™s): software que gerencia servi√ßos t√≠picos de um banco de dados

-   Escopo: Bancos de Dados relacionais (RDBMS)

-   Servi√ßos t√≠picos:

    -   Acesso de consulta

    -   Altera√ß√£o e concorr√™ncia

    -   Transa√ß√µes (ACID - atomicidade, consist√™ncia, isolamento, durabilidade)

    -   Armazenamento e organiza√ß√£o de estruturas como √≠ndices

    -   Rodar stored procedures üõë

## Bancos de Dados Relacionais

-   Proposto por E. F. Codd (1970)

-   Rela√ß√µes (Relations, listas de tuplas, ou tabelas)

    -   \~Dataframe

    -   Identificadas por uma chave (subconjunto dos atributos ou colunas)

    -   Relation $\neq$ Relationship

    ![Tabela de um banco relacional](Relational_database_terms.svg.png)

## Bancos de Dados Relacionais - Um pouco de vocabul√°rio

-   Dom√≠nio - valores poss√≠veis para um campo

-   Restri√ß√µes (constraints) - restri√ß√µes de dom√≠nio ou integridade das rela√ß√µes

-   Chave Prim√°ria - Um tipo de restri√ß√£o. Existe uma por tabela. Subconjunto dos atributos que identifica as tuplas. As do tipo *surrogate* n√£o t√™m significado de neg√≥cio.

-   Chave estrangeira - Um tipo de restri√ß√£o. Subconjunto dos atributos que se relaciona com uma chave prim√°ria de outra tabela.

-   √çndice - estrutura mantida pelo SGBD que fornece acesso r√°pido a valores do banco. veremos adiante.

## Um exemplo de banco relacional

Este √© um Modelo Entidade-Relacionamento de um banco de dados

![Exemplo de banco de dados relacional](sqlite-sample-database-color.jpg)

## Opera√ß√µes Relacionais

-   Opera√ß√µes relacionais (j√° conhecemos essas opera√ß√µes, pois j√° as executamos em dataframes usando verbos da dplyr)

    -   Opera√ß√µes relacionais baseadas nas opera√ß√µes de conjunto da matem√°tica

        -   uni√£o

        -   interse√ß√£o

        -   diferen√ßa

        -   produto cartesiano

    -   Opera√ß√µes relacionais espec√≠ficas principais

        -   sele√ß√£o

        -   proje√ß√£o

        -   join

## Opera√ß√µes Relacionais - Uni√£o

::: nonincremental
-   Conex√£o

```{r}
conexao <- dbConnect(RSQLite::SQLite(), "sample/chinook.db")

```

------------------------------------------------------------------------

-   Tabela Genres

```{r}
genres <- tbl(conexao, "genres") %>% 
    collect()

head(genres)

```

------------------------------------------------------------------------


-   Tabela Tracks

```{r}

tracks <- tbl(conexao, "tracks") %>% 
    collect()

head(tracks)

```
:::

## Opera√ß√µes Relacionais - Interse√ß√£o

## Opera√ß√µes Relacionais - Diferen√ßa

## Opera√ß√µes Relacionais - Produto Cartesiano

## Opera√ß√µes Relacionais - Sele√ß√£o

## Opera√ß√µes Relacionais - Proje√ß√£o

## Opera√ß√µes Relacionais - Join
